<link rel="import" href="../polymer/polymer-element.html">

<dom-module id="polymer-basket">
  <template>
    <style>
     :host {
      display: block;
      outline: 3px dashed black;
      padding: 5px;
    }

    div {
      align-self: baseline;
      grid-area: basket;
      justify-self: end;
    }

    .empty,
    .filled {
      border-radius: 5px;
      color: white;
      padding: 5px 10px;
    }

    .empty {
      background-color: gray;
    }

    .filled {
      background-color: seagreen;
    }
    </style>
     <div class$="[[classname]]">basket: [[items.length]] item(s)</div>
  </template>

  <script>
    /**
     * `polymer-basket`
     * basket
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class PolymerBasket extends Polymer.Element {

      constructor() {
        super();
        window.addEventListener('buy:changed', this.update);
      }

      update(data) {
        this.items.push(data.detail);
      }

      getClassName() {return this.items.length == 0  ? 'empty':'filled';}

      static get is() { return 'polymer-basket'; }
      static get properties() {
        return {
          items: {
            type: Array,
            value: function() { return []; }
          },

          classname:{
            type: String,
            computed: 'getClassName()'
          }
        };
      }
    }

    window.customElements.define(PolymerBasket.is, PolymerBasket);
  </script>
</dom-module>
